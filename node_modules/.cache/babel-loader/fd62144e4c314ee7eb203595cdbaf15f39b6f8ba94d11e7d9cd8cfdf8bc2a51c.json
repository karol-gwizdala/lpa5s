{"ast":null,"code":"var _jsxFileName = \"/Users/karol/Documents/GitHub/lpa5s/src/components/DelegateTask.js\",\n  _s = $RefreshSig$();\nimport { useLiveQuery } from \"dexie-react-hooks\";\nimport React, { useState } from \"react\";\nimport { db } from \"../db\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function DelegateTask() {\n  _s();\n  const {\n    auditId\n  } = useParams();\n  const navigate = useNavigate();\n  const roles = useLiveQuery(() => db.role.toArray());\n  const audits = useLiveQuery(() => db.audit.where(\"id\").equals(auditId * 1).toArray());\n  const [remarkRole, setRemarkRole] = useState(\"\");\n  const [remarkDate, setRemarkDate] = useState(\"\");\n  const [remark, setRemark] = useState(\"\");\n  const auditRole = audits === null || audits === void 0 ? void 0 : audits.map(item => {\n    return item.role;\n  });\n  const auditDate = audits === null || audits === void 0 ? void 0 : audits.map(item => {\n    return item.date;\n  });\n  const auditArea = audits === null || audits === void 0 ? void 0 : audits.map(item => {\n    return item.area;\n  });\n  async function addRemark() {\n    try {\n      const id = await db.remark.add({\n        auditId: auditId,\n        auditRole,\n        auditArea,\n        auditDate,\n        remarkStatus: \"To Do (Task)\",\n        remarkRole,\n        remarkDate,\n        remark,\n        remarkComment: \"\"\n      });\n      console.log(`Item ${id} added to db`);\n    } catch (error) {\n      console.log(\"Error\");\n    }\n  }\n  const questionNumber = () => {\n    if (window.location.href.includes(\"question1\")) {\n      return navigate(`/executeaudit/question2/${auditId}`);\n    } else if (window.location.href.includes(\"question2\")) {\n      return navigate(`/executeaudit/question3/${auditId}`);\n    } else if (window.location.href.includes(\"question3\")) {\n      return navigate(`/executeaudit/question4/${auditId}`);\n    } else if (window.location.href.includes(\"question4\")) {\n      return navigate(`/executeaudit/question5/${auditId}`);\n    } else if (window.location.href.includes(\"question5\")) {\n      return navigate(`/executeaudit/confirmmodal/${auditId}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"dialog\", {\n    open: true,\n    children: /*#__PURE__*/_jsxDEV(\"article\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Delegate Task\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: remark,\n        onChange: event => setRemark(event.target.value),\n        type: \"text\",\n        name: \"text\",\n        placeholder: \"Remark\",\n        \"aria-label\": \"Text\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: remarkRole,\n        name: \"remarkRole\",\n        onChange: event => setRemarkRole(event.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          disabled: true,\n          children: \"Responsible\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), roles === null || roles === void 0 ? void 0 : roles.map(item => {\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            children: item.role\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 20\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: remarkDate,\n        onChange: event => setRemarkDate(event.target.value),\n        type: \"date\",\n        name: \"date\",\n        \"aria-label\": \"Date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"secondary\",\n          onClick: () => {\n            navigate(-1);\n          },\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            backgroundColor: \"#00895A\",\n            borderColor: \"#00895A\"\n          },\n          onClick: () => {\n            questionNumber();\n            addRemark();\n          },\n          type: \"submit\",\n          children: \"Add Task\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(DelegateTask, \"CoU1+emYl1KBvRQYqLdJ32V86rc=\", false, function () {\n  return [useParams, useNavigate, useLiveQuery, useLiveQuery];\n});\n_c = DelegateTask;\nvar _c;\n$RefreshReg$(_c, \"DelegateTask\");","map":{"version":3,"names":["useLiveQuery","React","useState","db","useNavigate","useParams","jsxDEV","_jsxDEV","DelegateTask","_s","auditId","navigate","roles","role","toArray","audits","audit","where","equals","remarkRole","setRemarkRole","remarkDate","setRemarkDate","remark","setRemark","auditRole","map","item","auditDate","date","auditArea","area","addRemark","id","add","remarkStatus","remarkComment","console","log","error","questionNumber","window","location","href","includes","open","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","event","target","type","name","placeholder","disabled","className","onClick","style","backgroundColor","borderColor","_c","$RefreshReg$"],"sources":["/Users/karol/Documents/GitHub/lpa5s/src/components/DelegateTask.js"],"sourcesContent":["import { useLiveQuery } from \"dexie-react-hooks\";\nimport React, { useState } from \"react\";\nimport { db } from \"../db\";\nimport { useNavigate, useParams } from \"react-router-dom\";\n\nexport function DelegateTask() {\n  const { auditId } = useParams();\n  const navigate = useNavigate();\n\n  const roles = useLiveQuery(() => db.role.toArray());\n\n  const audits = useLiveQuery(() =>\n    db.audit\n      .where(\"id\")\n      .equals(auditId * 1)\n      .toArray()\n  );\n\n  const [remarkRole, setRemarkRole] = useState(\"\");\n  const [remarkDate, setRemarkDate] = useState(\"\");\n  const [remark, setRemark] = useState(\"\");\n  const auditRole = audits?.map((item) => {\n    return item.role;\n  });\n  const auditDate = audits?.map((item) => {\n    return item.date;\n  });\n\n  const auditArea = audits?.map((item) => {\n    return item.area;\n  });\n\n  async function addRemark() {\n    try {\n      const id = await db.remark.add({\n        auditId: auditId,\n        auditRole,\n        auditArea,\n        auditDate,\n        remarkStatus: \"To Do (Task)\",\n        remarkRole,\n        remarkDate,\n        remark,\n        remarkComment: \"\",\n      });\n\n      console.log(`Item ${id} added to db`);\n    } catch (error) {\n      console.log(\"Error\");\n    }\n  }\n\n  const questionNumber = () => {\n    if (window.location.href.includes(\"question1\")) {\n      return navigate(`/executeaudit/question2/${auditId}`);\n    } else if (window.location.href.includes(\"question2\")) {\n      return navigate(`/executeaudit/question3/${auditId}`);\n    } else if (window.location.href.includes(\"question3\")) {\n      return navigate(`/executeaudit/question4/${auditId}`);\n    } else if (window.location.href.includes(\"question4\")) {\n      return navigate(`/executeaudit/question5/${auditId}`);\n    } else if (window.location.href.includes(\"question5\")) {\n      return navigate(`/executeaudit/confirmmodal/${auditId}`);\n    }\n  };\n\n  return (\n    <dialog open>\n      <article>\n        <h3>Delegate Task</h3>\n        <input\n          value={remark}\n          onChange={(event) => setRemark(event.target.value)}\n          type=\"text\"\n          name=\"text\"\n          placeholder=\"Remark\"\n          aria-label=\"Text\"\n        />\n        <select\n          value={remarkRole}\n          name=\"remarkRole\"\n          onChange={(event) => setRemarkRole(event.target.value)}\n        >\n          <option value=\"\" disabled>\n            Responsible\n          </option>\n          {roles?.map((item) => {\n            return <option key={item.id}>{item.role}</option>;\n          })}\n        </select>\n\n        <input\n          value={remarkDate}\n          onChange={(event) => setRemarkDate(event.target.value)}\n          type=\"date\"\n          name=\"date\"\n          aria-label=\"Date\"\n        />\n        <div className=\"grid\">\n          <button\n            type=\"submit\"\n            className=\"secondary\"\n            onClick={() => {\n              navigate(-1);\n            }}\n          >\n            Cancel\n          </button>\n          <button\n            style={{ backgroundColor: \"#00895A\", borderColor: \"#00895A\" }}\n            onClick={() => {\n              questionNumber();\n              addRemark();\n            }}\n            type=\"submit\"\n          >\n            Add Task\n          </button>\n        </div>\n      </article>\n    </dialog>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}